<!DOCTYPE html>
<html>
<head>
	<title>terrorViz</title>

	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
	<meta name="description" content="Information visualization of the Global Terrorism Database">
	<meta name="apple-mobile-web-app-title" content="Terrorviz">
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="theme-color" content="#000000">
	<meta name="HandheldFriendly" content="True">

	<meta property="og:title" content="Terrorviz" />
	<meta property="og:type" content="Webapp" />
	<meta property="og:image" content="" />
	<meta property="og:url" content="" />
	<meta property="og:description" content="Information visualization of the Global Terrorism Database" />
	<meta charset="utf-8">

	<link href="https://fonts.googleapis.com/css?family=Roboto:100" rel="stylesheet">
	<script src="http://d3js.org/d3.v3.min.js"></script>
	<script src="http://d3js.org/topojson.v0.min.js"></script>
</head>
<style>
	path {
		stroke: white;
		stroke-width: 0.25px;
		fill: grey;
	}
	div.tooltip {
		position: absolute;
		text-align: center;
		width: 250px;
		height: 48px;
		padding: 4px;
		font: 12px helvetica;
		background: lightsteelblue;
		border: 0px;
		border-radius: 0px;
		pointer-events: none;
	}
	div.headText{

		padding: 2px;
		margin-left: 40px;
		margin-bottom: 10px;
		margin-top: 10px;
		color: white;
		font-size: 40px;
		font-family: 'Roboto', sans-serif;
	}
	body{
		background-color: dimgrey

	}
	p1{
		font-size: 14px;
	}


</style>
<div class="headText">terrorViz <p1>visualization of terrorist attacks between 1970 - 2015</p1></div>
<body>
<script>

    var width = 1600, height = 800;

    var projection = d3.geo.mercator()
        .scale((width - 3) / (2 * Math.PI))
        .translate([width / 2, height / 1.75]);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);
    //.style("background-color", "black");

    var path = d3.geo.path()
        .projection(projection);

    var g = svg.append("g");

    var tooltip = d3.select("body").append("div")
        .attr("class", "tooltip")
        .style("opacity", 0);

    // load and display the World
    d3.json("world-110m2.json", function(error, topology) {
        d3.csv("globalterrorism.csv", function(error, data) {

            g.selectAll("circle")
                .data(data)
                .enter()
                .append("a")
                .append("circle")
                .attr("cx", function(d) {
                    return projection([d.longitude, d.latitude])[0];
                })
                .attr("cy", function(d) {
                    return projection([d.longitude, d.latitude])[1];
                })
                .attr("r", 1)
                .style("fill", "aqua")
                .style("opacity", 0.25)
                .on("mouseover", function(d) {

                    tooltip.transition()
                        .duration(300)
                        .style("opacity", 1)
                        .style("background", "black")
                        .style("color", "white")
                        .style("letter-spacing", "1px")
                        .style("text-shadow", "none");

                    tooltip.html(d.country_txt + ", " + d.city + "<br>" + d.attacktype1_txt + "<br>" + d.iyear)
                        .style("left", (d3.event.pageX + 10) + "px")
                        .style("top", (d3.event.pageY - 28) + "px");
                })
                .on("mouseout", function(d) {

                    tooltip.transition()
                        .duration(300)
                        .style("opacity", 0);

                })
                .on("click",  function(d) {
                    //...
                    console.log(d.country_txt)
                });
        });

        g.selectAll("path")
            .data(topojson.object(topology, topology.objects.countries).geometries)
            .enter()
            .append("path")
            .attr("d", path);
    });


    /*
    // zoom and pan
    var zoom = d3.behavior.zoom()
        .on("zoom",function() {
            g.attr("transform","translate("+
                d3.event.translate.join(",")+")scale("+d3.event.scale+")");
            g.selectAll("circle")
                .attr("d", path.projection(projection));
            g.selectAll("path")
                .attr("d", path.projection(projection));

        });

    svg.call(zoom)
*/


</script>
<script src="/public/bundle.js"></script>
</body>
</html>
